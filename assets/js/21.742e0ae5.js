(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{345:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("DOM 元素是 JS 交互的基础，当点击 DOM 元素交互时，捕获事件的过程，并做出对应 JS 操作，因此理解事件流向是很重要的。")]),t._v(" "),s("h3",{attrs:{id:"一、dom-事件流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、dom-事件流"}},[t._v("#")]),t._v(" 一、DOM 事件流")]),t._v(" "),s("p",[t._v("W3C 标准中规定了事件模型中，一次事件发生的三个过程：")]),t._v(" "),s("ul",[s("li",[t._v("事件捕获：DOM 树节点中，从外向内找监听函数；")]),t._v(" "),s("li",[t._v("事件目标： 找到对应 DOM 节点，有监听函数就调用，并提供对应事件信息（e.target) ，没有的话就跳过；")]),t._v(" "),s("li",[t._v("事件冒泡：从内向外查找监听函数")])]),t._v(" "),s("h3",{attrs:{id:"二、dom-事件处理方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、dom-事件处理方式"}},[t._v("#")]),t._v(" 二、DOM 事件处理方式")]),t._v(" "),s("p",[t._v("除了 DOM 事件流的标准外，DOM 标准还包括 DOM 的事件模型：DOM0、DOM2、DOM3。它们分别规定了事件的处理阶段：捕获阶段还是冒泡阶段，还规定了怎么添加事件处理函数及个数等等。")]),t._v(" "),s("h4",{attrs:{id:"dom0-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom0-事件"}},[t._v("#")]),t._v(" DOM0 事件")]),t._v(" "),s("p",[t._v("直接在标签中绑定 onclick 事件；或者在 js 中，获取 DOM 元素，再绑定 onclick = function(){}函数。")]),t._v(" "),s("p",[t._v("两者区别：标签直接绑定多个事件时，都会触发；而 js 绑定是，后面绑定事件会覆盖前面的。\n共同点：事件监听都是在事件冒泡阶段。")]),t._v(" "),s("h4",{attrs:{id:"dom2-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom2-事件"}},[t._v("#")]),t._v(" DOM2 事件")]),t._v(" "),s("p",[t._v("通过 addEventListener 和 removeEventListener 两个方法添加和移除事件。常用的有两个参数，实际上接收三个参数：")]),t._v(" "),s("ol",[s("li",[t._v("第一个是事件名（click）")]),t._v(" "),s("li",[t._v("第二个是事件处理函数")]),t._v(" "),s("li",[t._v("第三个 boolean 值，true 表示在事件在捕获阶段调用，false 为在冒泡阶段调用，默认值为 false。")])]),t._v(" "),s("p",[t._v("特点：")]),t._v(" "),s("ul",[s("li",[t._v("addEventListener 可以为元素添加多个事件处理函数，触发时会按照顺序依次调用；")]),t._v(" "),s("li",[t._v("removeEventListener 不能移除匿名添加的函数。")])]),t._v(" "),s("h4",{attrs:{id:"dom3-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom3-事件"}},[t._v("#")]),t._v(" DOM3 事件")]),t._v(" "),s("p",[t._v("DOM3 事件是在 DOM2 事件基础上增加了事件类型：")]),t._v(" "),s("ul",[s("li",[t._v("UI 事件，当用户与页面上的元素交互时触发，如：load、scroll")]),t._v(" "),s("li",[t._v("焦点事件，当元素获得或失去焦点时触发，如：blur、focus")]),t._v(" "),s("li",[t._v("鼠标事件，当用户通过鼠标在页面执行操作时触发如：dbclick、mouseup")]),t._v(" "),s("li",[t._v("滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel")]),t._v(" "),s("li",[t._v("文本事件，当在文档中输入文本时触发，如：textInput")]),t._v(" "),s("li",[t._v("键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress")]),t._v(" "),s("li",[t._v("合成事件，当为 IME（输入法编辑器）输入字符时触发，如：compositionstart")]),t._v(" "),s("li",[t._v("变动事件，当底层 DOM 结构发生变化时触发，如：DOMsubtreeModified")])]),t._v(" "),s("h3",{attrs:{id:"三、dom-事件流应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、dom-事件流应用场景"}},[t._v("#")]),t._v(" 三、DOM 事件流应用场景")]),t._v(" "),s("h4",{attrs:{id:"事件冒泡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件冒泡"}},[t._v("#")]),t._v(" 事件冒泡")]),t._v(" "),s("p",[t._v("我们常说的事件冒泡，就是 DOM 事件流中的第三阶段。在冒泡阶段，如果监听到有对应函数，就会调用函数执行。常用的事件处理模型也默认的是执行冒泡阶段函数。")]),t._v(" "),s("p",[t._v("常见应用场景：整个红包券位信息，包含很多子节点信息，如果想要实现点击整个券位都可以跳转，同时实现点击信息上报，则可以将点击事件监听绑定在父节点上，通过 target（点击元素）和 currentTarget（监听元素）来区分实际点击券位。")]),t._v(" "),s("p",[t._v("当然，某些封装好的独立组件需要避免时间冒泡，可通过 e.stopPropagation()来取消冒泡（实际上取消的并不仅仅只是冒泡，它是阻止整个事件流的传递）。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("说到 e.stopPropagation()，还得和 e.preventDefault()区别区别。前者阻止的是事件传递，而后者阻止的是默认行为。元素 + 动作 = 默认行为，默认行为参考：https://web.dev/eventing-deepdive/#eventpreventdefault")])]),t._v(" "),s("h4",{attrs:{id:"a-trick-这些代码让你的整个网页不可用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-trick-这些代码让你的整个网页不可用"}},[t._v("#")]),t._v(" a trick - 这些代码让你的整个网页不可用")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventEverything")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopPropagation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopImmediatePropagation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"click"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" preventEverything"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keydown"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" preventEverything"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mousedown"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" preventEverything"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contextmenu"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" preventEverything"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mousewheel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" preventEverything"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("capture")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("passive")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("原理是把网页所有的事件都阻止传递，并且阻止了默认行为，表现：不能滚动、点击跳转、输入......")]),t._v(" "),s("h4",{attrs:{id:"事件委托"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件委托"}},[t._v("#")]),t._v(" 事件委托")]),t._v(" "),s("p",[t._v("目的：页面事件处理函数个数会影响页面整体性能，如果添加过多事件处理函数在子 DOM 节点上，会占用过多内存，影响页面性能，委托给父节点来处理就可以了。")]),t._v(" "),s("p",[t._v("原理：事件委托利用冒泡原理，把事件加到父元素或者更高以及元素身上，从而触发执行效果。")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("Codepen："),s("a",{attrs:{href:"https://codepen.io/simonzhangs/pen/qBYreJV",target:"_blank",rel:"noopener noreferrer"}},[t._v("实践出真知"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("参考链接：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://web.dev/eventing-deepdive/#eventstoppropagation-and-eventpreventdefault",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript eventing deep dive"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/Josiah_Yuan/article/details/123818609",target:"_blank",rel:"noopener noreferrer"}},[t._v("什么是 DOM0,DOM2,DOM3？"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/RedaTao/article/details/109581115",target:"_blank",rel:"noopener noreferrer"}},[t._v("到底什么是 DOM0、DOM2、DOM3"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/423712302",target:"_blank",rel:"noopener noreferrer"}},[t._v("DOM 事件与事件委托（初理解）"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);